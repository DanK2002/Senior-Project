<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/htmx.org@^1.6.0/dist/htmx.min.js"></script>
    <style>
    
    </style>
</head>
<body>
    <div id="inProgress" hx-get="../back-inprogress/" hx-trigger="every 30s" hx-target="#inProgress">
        <div class="sub-title">
            <h1>In Progress</h1>
        </div>

        <div id="large-box">
            <div class="orders-container">
                {% if in_progress_orders %}
                    {% for order in in_progress_orders|dictsortreversed:"time_est" %}
                        <div class="order-box">
                            <form id="order_form_{{ order.id }}" hx-post="{% url 'basic:mark_ready' order.id %}">
                            <h3><b>Order Number: {{ order.number }}</b></h3>
                            <p>Est. Time: {{ order.time_est }}</p>
                            <div class="order-message-box">
                                <p>{{ order.message }}</p>
                            </div>
                            {% for food in order.foods.all %}
                                <input type="checkbox" id="food_{{ food.id }}">
                                <b><label for="food_{{ food.id }}">{{ food.name }}: {{ food.message }}</label><br></b>
                            {% endfor %}
                            <p>Price: {{ order.price}}</p>
                            <form id="order_form_{{ order.id }}" hx-post="{% url 'basic:mark_ready' order.id %}">
                                {% csrf_token %}
                                <button class="button" type="submit">Ready</button>
                            </form>  
                        </div>
                    {% endfor %}
                {% else %}
                    <p>No orders in progress.</p>
                {% endif %}
            </div>
        </div>

        <div id="button-container2" hx-target="body" hx-swap="outerHTML">
            <button class="button" hx-get="../back-order/">Back to Menu</button>
        </div>
    </div>
    

</body>
</html>